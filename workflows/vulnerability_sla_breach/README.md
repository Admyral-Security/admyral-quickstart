# Vulnerability SLA Breach Monitoring

## Required Secrets

To use this workflow, the following secrets are required. To set them up, please follow the respective guide on the linked documentation page.

- [Slack](https://docs.admyral.dev/integrations/slack/slack)
- [Jira](https://docs.admyral.dev/integrations/jira/jira)

> [!IMPORTANT]
> The workflow currently expects the following secret names: \
> **Slack**: `slack_secret` \
> **Jira**: `jira_secret` \
> If your secrets have a different name, please adjust the secret mappings in the workflow function accordingly \
> e.g `secrets = {"SLACK_SECRET": "your_secret_name"}` and for Jira respectively.

## Set Up Workflow

1. Open the `vulnerability_sla_breach.py` file
2. Adjust the `email` parameter in `transform_jira_to_slack` with the email adress of the person who should be notified via Slack

Use the CLI to push the custom actions:

```bash
poetry run admyral action push transform_jira_to_slack -a workflows/transform_jira_to_slack/transform_jira_to_slack.py
```

Use the CLI to push the workflow:

```bash
poetry run admyral workflow push vulnerability_sla_breach -f workflows/transform_jira_to_slack/transform_jira_to_slack.py  --activate
```

## Expected Payload

> [!IMPORTANT]
> The workflow doesn't expect any payload.

## Run Workflow

Use the Admyral UI:

1. Open the workflow in the workflow No-Code editor
2. Click on **Run**
3. Click on **Run Workflow**

Or use the CLI to trigger the workflow:

```bash
poetry run admyral workflow trigger vulnerability_sla_breach
```
